<!--
===============================================================================
Z!NG • EMOTIONAL JOURNEY — CONTEXT & WORKING NOTES (READ ME FIRST)
===============================================================================
Questo progetto mostra una visualizzazione "ambient" per la conferenza Zing:
- Colonna SINISTRA: titolo, testo introduttivo, legenda interattiva delle emozioni.
- Colonna CENTRALE: mappa 3×3 delle stanze (SVG inline). Ogni stanza è un <g id="room-…">.
  All'interno di ciascuna stanza c'è un riquadro più scuro marcato con class="inner-box".
- Colonna DESTRA: due bar chart (D3.js), uno per Giorno 1 e uno per Giorno 2.
  Ogni barra rappresenta uno slot di 10 minuti con l'emozione dominante (aggregata su tutte le aree).
  Sotto a ciascun chart c'è il totale delle reazioni filtrato correttamente per quel giorno.

DATI
- I dati provengono da un Google Sheet pubblicato come CSV (endpoint gviz).
- Il JS carica TUTTE le righe (giorno 1 + giorno 2) e divide per giorno in modo ROBUSTO.
  Se i campi "day" sono incoerenti o vuoti, il codice usa le DATE effettive per separare i giorni.
- La legenda (a sinistra) è interattiva: cliccando su un'emozione, vengono evidenziate le barre
  di quell'emozione e "spente" (dimmed) le altre. Un secondo click resetta l'effetto.

OBIETTIVO
- Proiettare su un display: mappa centrale + andamento temporale delle emozioni a destra.
- Il layout dev'essere robusto e leggibile su schermi grandi, con bottom bar fissa.

===============================================================================
-->

<!DOCTYPE html>
<html lang="it">
  <head>
    <meta charset="UTF-8" />
    <title>Zing • Emotional Journey</title>
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="stylesheet" href="./styles.css" />
  </head>
  <body>
    <!-- Layout a 3 colonne: sinistra (intro+legenda) • centro (SVG 9 stanze) • destra (2 chart) -->
    <div class="layout">
      <!-- Colonna 1 -->
      <!-- Colonna SINISTRA: titolo, intro, legenda interattiva -->
      <aside class="col col-left">
        <h1>Z!ng<br /><small>Emotional Journey</small></h1>

        <p class="intro">
          Questa mappa interattiva mostra in tempo reale i risultati dei
          sondaggi della Zing Experience.
        </p>

        <ul class="howto">
          <li>
            <span class="icon icon-stanza" aria-hidden="true"></span>
            <span>Ogni stanza rappresenta un’attività</span>
          </li>
          <li>
            <span class="icon icon-lanterna" aria-hidden="true"></span>
            <span
              >Il colore della lanterna indica l’emozione più votata nella
              stanza</span
            >
          </li>
          <li>
            <span class="icon icon-touch-stanza" aria-hidden="true"></span>
            <span>Tocca una stanza per entrare nel dettaglio</span>
          </li>
          <li>
            <span class="icon icon-touch-emozione" aria-hidden="true"></span>
            <span>Tocca un’emozione per filtrare la mappa</span>
          </li>
        </ul>

        <p class="helper">
          Rispondi ai sondaggi per vedere come le tue emozioni si uniscono a
          quelle degli altri e cambiano la mappa!
        </p>
        <div class="spacer"></div>
        <div class="emotions">
          <h3>Attiva un’emozione per esplorare</h3>
          <ul>
            <li><i style="--c: #2ecc71"></i> Curiosità</li>
            <li><i style="--c: #f1c40f"></i> Entusiasmo</li>
            <li><i style="--c: #3498db"></i> Fiducia</li>
            <li><i style="--c: #95a5a6"></i> Indifferenza</li>
            <li><i style="--c: #9b59b6"></i> Confusione</li>
            <li><i style="--c: #e74c3c"></i> Timore</li>
          </ul>
        </div>
      </aside>

      <!-- Colonna 2 con SVG inline -->
      <!-- Colonna CENTRALE: SVG inline delle 9 stanze -->
      <main class="col col-center">
        <div class="center-map">
          <svg
            width="1002"
            height="958"
            viewBox="0 0 1002 958"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <g>
              <path
                d="M6 141V276H166H326V141V6H166H6V141ZM322.416 39.6122L322.8 71.0204H210.672H98.544L58.608 42.3673C36.464 26.6082 16.752 12.3918 14.448 10.9592L10.48 8.20407H166.256H322.032L322.416 39.6122ZM62.064 48.649L95.728 72.6735L95.6 172.298C95.6 227.18 95.472 272.143 95.216 272.253C95.088 272.363 75.76 272.694 52.464 272.914L9.84 273.245V142.322V11.4L19.184 18.0122C24.176 21.649 43.504 35.4245 62.064 48.649ZM323.056 106.506C322.544 124.249 322.16 169.102 322.16 206.131V273.355H210.8L99.44 273.245V173.731V74.3265H211.696H323.824L323.056 106.506Z"
                fill="#C7C7C7"
              />
              <path
                d="M322.416 39.6122L322.8 71.0204H210.672H98.544L58.608 42.3673C36.464 26.6082 16.752 12.3918 14.448 10.9592L10.48 8.20407H166.256H322.032L322.416 39.6122Z"
                fill="#F3F3F3"
              />
              <path
                d="M323.056 106.506C322.544 124.249 322.16 169.102 322.16 206.131V273.355H210.8L99.44 273.245V173.731V74.3265H211.696H323.824L323.056 106.506Z"
                fill="#D7D7D7"
              />
              <path
                d="M62.064 48.649L95.728 72.6735L95.6 172.298C95.6 227.18 95.472 272.143 95.216 272.253C95.088 272.363 75.76 272.694 52.464 272.914L9.84 273.245V142.322V11.4L19.184 18.0122C24.176 21.649 43.504 35.4245 62.064 48.649Z"
                fill="#F3F3F3"
              />
            </g>
            <g>
              <path
                d="M341 140.725V275.45L500.206 275.67C587.683 275.89 659.412 276 659.412 276C659.544 276 659.941 215.291 660.338 140.945L661 6H501H341V140.725ZM657.294 9.40936C657.294 10.3992 644.854 36.6843 632.282 62.0896C630.032 66.5988 628.179 70.4481 628.179 70.558C628.179 70.778 570.611 70.888 500.206 70.888H372.1L361.248 46.9124C355.293 33.8248 348.808 19.7475 346.955 15.5682L343.647 8.19962H500.471C609.916 8.19962 657.294 8.52953 657.294 9.40936ZM657.03 146.444L656.633 272.701L642.34 273.031L628.179 273.36V175.699V78.0367L634.267 65.9389C637.576 59.2301 643.928 46.2526 648.428 37.0143C652.927 27.886 656.765 20.2973 657.03 20.2973C657.294 20.2973 657.294 77.0469 657.03 146.444ZM371.174 172.839L371.438 272.151H357.543H343.647V165.69C343.647 107.181 344.044 50.7617 344.573 40.4236L345.367 21.3972L358.072 47.5723L370.777 73.6375L371.174 172.839ZM625.268 173.169L624.871 272.151L500.074 272.371L375.409 272.701V173.389V74.1874H500.471H625.533L625.268 173.169Z"
                fill="#C7C7C7"
              />
              <path
                d="M657.294 9.40936C657.294 10.3992 644.854 36.6843 632.282 62.0896C630.032 66.5988 628.179 70.4481 628.179 70.558C628.179 70.778 570.611 70.888 500.206 70.888H372.1L361.248 46.9124C355.293 33.8248 348.808 19.7475 346.955 15.5682L343.647 8.19962H500.471C609.916 8.19962 657.294 8.52953 657.294 9.40936Z"
                fill="#F3F3F3"
              />
              <path
                d="M371.174 172.839L371.438 272.151H357.543H343.647V165.69C343.647 107.181 344.044 50.7617 344.573 40.4236L345.367 21.3972L358.072 47.5723L370.777 73.6375L371.174 172.839Z"
                fill="#F3F3F3"
              />
              <path
                d="M657.03 146.444L656.633 272.701L642.34 273.031L628.179 273.36V175.699V78.0367L634.267 65.9389C637.576 59.2301 643.928 46.2526 648.428 37.0143C652.927 27.886 656.765 20.2973 657.03 20.2973C657.294 20.2973 657.294 77.0469 657.03 146.444Z"
                fill="#F3F3F3"
              />
              <path
                d="M625.268 173.169L624.871 272.151L500.074 272.371L375.409 272.701V173.389V74.1874H500.471H625.533L625.268 173.169Z"
                fill="#D7D7D7"
              />
            </g>
            <g>
              <path
                d="M676 141V276H836H996V141V6H836H676V141ZM990.88 8.6449C990.88 8.86531 971.936 22.9714 948.64 40.0531L906.528 71.0204H793.12H679.84V39.6122V8.20407H835.36C920.864 8.20407 990.88 8.42449 990.88 8.6449ZM992.16 143.204V273.796H949.92H907.68V174.061V74.4367L920.864 64.5184C938.016 51.6245 991.392 12.6122 991.776 12.6122C992.032 12.6122 992.16 71.351 992.16 143.204ZM904.096 173.51L903.84 272.694L890.016 272.804C882.464 272.914 832.16 273.024 778.272 273.135L680.224 273.355L679.584 183.98C679.328 134.829 679.328 90.0857 679.584 84.4653L680.096 74.3265H792.352H904.48L904.096 173.51Z"
                fill="#C7C7C7"
              />
              <path
                d="M992.16 143.204V273.796H949.92H907.68V174.061V74.4367L920.864 64.5184C938.016 51.6245 991.392 12.6122 991.776 12.6122C992.032 12.6122 992.16 71.351 992.16 143.204Z"
                fill="#F3F3F3"
              />
              <path
                d="M990.88 8.6449C990.88 8.86531 971.936 22.9714 948.64 40.0531L906.528 71.0204H793.12H679.84V39.6122V8.20407H835.36C920.864 8.20407 990.88 8.42449 990.88 8.6449Z"
                fill="#F3F3F3"
              />
              <path
                d="M904.096 173.51L903.84 272.694L890.016 272.804C882.464 272.914 832.16 273.024 778.272 273.135L680.224 273.355L679.584 183.98C679.328 134.829 679.328 90.0857 679.584 84.4653L680.096 74.3265H792.352H904.48L904.096 173.51Z"
                fill="#D7D7D7"
              />
            </g>
            <path
              d="M9 8.15771C91.5 20.7763 215.604 32.9035 350 35.4329C469.678 37.6852 537.571 38.7486 657 35.4329C715.266 33.8152 748.137 32.8868 805.501 29.2814C880.285 24.5811 993.5 8 993.5 8"
              stroke="#505050"
              stroke-width="2"
              stroke-linecap="round"
            />
            <path
              d="M9 8C47.0193 23.3501 143.177 39.032 224.108 45.6776C370.684 57.7135 499.097 58.4953 656.829 45.6776C774.889 36.0838 889.113 15.2681 994 8"
              stroke="#505050"
              stroke-width="2"
              stroke-linecap="round"
            />
            <g>
              <path
                d="M6 461.304C6 535.622 6.51098 595.942 7.1497 596.275C8.17166 596.942 324.084 597.275 324.723 596.72C324.978 596.497 325.361 535.733 325.617 461.638L326 327H166.064H6V461.304ZM321.529 336.998V343.663H209.242H96.9541L72.1717 338.775C58.6307 336.109 44.0679 333.221 39.8523 332.443C35.6367 331.666 31.8044 330.777 31.2934 330.444C30.7824 330.11 95.9321 329.888 175.9 330.11L321.529 330.333V336.998ZM54.0319 338.331L95.1657 346.218L96.0599 374.323C96.5709 389.764 96.6986 407.76 96.3154 414.426C95.8044 420.98 95.5489 456.528 95.4212 493.409V560.394L88.1397 563.282C81.497 565.837 15.3253 590.721 11.493 592.165C10.2156 592.609 9.83234 566.06 9.83234 461.527C9.83234 360.437 10.2156 330.333 11.3653 330.333C12.2595 330.333 31.4212 333.887 54.0319 338.331ZM321.529 453.639V560.283H210.391H99.2535V453.639V346.996H210.391H321.529V453.639ZM321.529 578.057V593.609L169.896 593.498H18.1357L24.523 590.721C33.2096 587.055 92.7385 564.615 96.6986 563.505C98.487 563.06 149.713 562.616 210.774 562.616H321.529V578.057Z"
                fill="#C7C7C7"
              />
              <path
                d="M321.529 453.639V560.283H210.391H99.2535V453.639V346.996H210.391H321.529V453.639Z"
                fill="#D7D7D7"
              />
              <path
                d="M54.0319 338.331L95.1657 346.218L96.0599 374.323C96.5709 389.764 96.6986 407.76 96.3154 414.426C95.8044 420.98 95.5489 456.528 95.4212 493.409V560.394L88.1397 563.282C81.497 565.837 15.3253 590.721 11.493 592.165C10.2156 592.609 9.83234 566.06 9.83234 461.527C9.83234 360.437 10.2156 330.333 11.3653 330.333C12.2595 330.333 31.4212 333.887 54.0319 338.331Z"
                fill="#F3F3F3"
              />
              <path
                d="M321.529 578.057V593.609L169.896 593.498H18.1357L24.523 590.721C33.2096 587.055 92.7385 564.615 96.6986 563.505C98.487 563.06 149.713 562.616 210.774 562.616H321.529V578.057Z"
                fill="#F3F3F3"
              />
              <path
                d="M321.529 336.998V343.663H209.242H96.9541L72.1717 338.775C58.6307 336.109 44.0679 333.221 39.8523 332.443C35.6367 331.666 31.8044 330.777 31.2934 330.444C30.7824 330.11 95.9321 329.888 175.9 330.11L321.529 330.333V336.998Z"
                fill="#F3F3F3"
              />
            </g>
            <g>
              <path
                d="M342.709 429.444C342.709 485.889 342.315 546.667 341.789 564.444L341 597H500.211H659.291L659.817 575.556C660.08 563.889 660.343 503.111 660.606 440.556L661 327H501.92H342.709V429.444ZM651.534 330.667C651.271 330.889 645.224 333.889 638.124 337.444L625.24 343.889L498.765 343.444L372.29 343.111L360.589 336.778L348.888 330.333L499.948 330.111C583.038 329.889 651.271 329.889 651.534 330C651.797 330.222 651.797 330.444 651.534 330.667ZM656.924 462.778V594.111L642.463 577.667L628.001 561.333L628.264 453.333L628.658 345.444L642.463 338.444C650.088 334.667 656.399 331.556 656.661 331.444C656.793 331.444 656.924 390.556 656.924 462.778ZM360.721 340.556C365.979 343.444 370.844 345.889 371.633 345.889C372.553 345.889 372.947 379.222 372.947 453V560.111L360.326 574.444C353.227 582.222 347.048 589.111 346.522 589.667C345.864 590.333 345.339 532.889 345.339 461.667V332.444L348.362 333.778C349.94 334.556 355.462 337.556 360.721 340.556ZM625.371 440.111C625.371 491.444 624.977 539.444 624.451 546.778L623.662 560.333H500.211H376.892V453.667V347H501.131H625.371V440.111ZM638.124 578.111C645.618 586.333 651.666 593.333 651.666 593.667C651.666 594 583.301 594.333 499.817 594.333C416.333 594.444 347.968 594.222 347.968 594C347.968 593.667 353.884 586.778 361.247 578.556L374.525 563.667L395.692 563.444C407.393 563.222 463.662 563.111 520.721 563.111H624.583L638.124 578.111Z"
                fill="#C7C7C7"
              />
              <path
                d="M651.534 330.667C651.271 330.889 645.224 333.889 638.124 337.444L625.24 343.889L498.765 343.444L372.29 343.111L360.589 336.778L348.888 330.333L499.948 330.111C583.038 329.889 651.271 329.889 651.534 330C651.797 330.222 651.797 330.444 651.534 330.667Z"
                fill="#F3F3F3"
              />
              <path
                d="M656.924 462.778V594.111L642.463 577.667L628.001 561.333L628.264 453.333L628.658 345.444L642.463 338.444C650.088 334.667 656.399 331.556 656.661 331.444C656.793 331.444 656.924 390.556 656.924 462.778Z"
                fill="#F3F3F3"
              />
              <path
                d="M625.371 440.111C625.371 491.444 624.977 539.444 624.451 546.778L623.662 560.333H500.211H376.892V453.667V347H501.131H625.371V440.111Z"
                fill="#D7D7D7"
              />
              <path
                d="M360.721 340.556C365.979 343.444 370.844 345.889 371.633 345.889C372.553 345.889 372.947 379.222 372.947 453V560.111L360.326 574.444C353.227 582.222 347.048 589.111 346.522 589.667C345.864 590.333 345.339 532.889 345.339 461.667V332.444L348.362 333.778C349.94 334.556 355.462 337.556 360.721 340.556Z"
                fill="#F3F3F3"
              />
              <path
                d="M638.124 578.111C645.618 586.333 651.666 593.333 651.666 593.667C651.666 594 583.301 594.333 499.817 594.333C416.333 594.444 347.968 594.222 347.968 594C347.968 593.667 353.884 586.778 361.247 578.556L374.525 563.667L395.692 563.444C407.393 563.222 463.662 563.111 520.721 563.111H624.583L638.124 578.111Z"
                fill="#F3F3F3"
              />
            </g>
            <g>
              <path
                d="M677.664 327.311C676.384 327.755 676 355.898 676 462.488V597L835.744 596.778L995.36 596.446L995.744 462.045L996 327.755H858.656C783.008 327.755 711.712 327.533 700.192 327.201C688.672 326.868 678.432 326.979 677.664 327.311ZM956.96 333.96C949.92 335.4 936.736 338.281 927.52 340.275L910.88 343.821L795.424 344.153L679.84 344.375V337.727V331.079L824.864 331.189L969.76 331.3L956.96 333.96ZM992.16 461.823V592.568L986.144 590.463C982.688 589.244 967.968 583.815 953.12 578.164C938.4 572.624 922.016 566.53 917.024 564.535L907.68 561.101V454.067V347.034L940.064 340.718C957.728 337.173 975.776 333.627 980 332.852C984.224 331.965 988.704 331.189 989.984 331.189C992.032 331.079 992.16 338.059 992.16 461.823ZM903.84 454.067V560.436H791.84H679.84V471.463C679.84 422.6 679.456 374.734 678.944 365.094L678.176 347.699H790.944H903.84V454.067ZM919.84 568.857C927.648 571.959 945.184 578.607 958.88 583.704C972.576 588.801 984.224 593.233 984.736 593.565C985.376 594.008 726.176 594.119 684.064 593.676H679.84V578.275V562.984L792.864 563.095L905.76 563.206L919.84 568.857Z"
                fill="#C7C7C7"
              />
              <path
                d="M919.84 568.857C927.648 571.959 945.184 578.607 958.88 583.704C972.576 588.801 984.224 593.233 984.736 593.565C985.376 594.008 726.176 594.119 684.064 593.676H679.84V578.275V562.984L792.864 563.095L905.76 563.206L919.84 568.857Z"
                fill="#F3F3F3"
              />
              <path
                d="M903.84 454.067V560.436H791.84H679.84V471.463C679.84 422.6 679.456 374.734 678.944 365.094L678.176 347.699H790.944H903.84V454.067Z"
                fill="#D7D7D7"
              />
              <path
                d="M992.16 461.823V592.568L986.144 590.463C982.688 589.244 967.968 583.815 953.12 578.164C938.4 572.624 922.016 566.53 917.024 564.535L907.68 561.101V454.067V347.034L940.064 340.718C957.728 337.173 975.776 333.627 980 332.852C984.224 331.965 988.704 331.189 989.984 331.189C992.032 331.079 992.16 338.059 992.16 461.823Z"
                fill="#F3F3F3"
              />
              <path
                d="M956.96 333.96C949.92 335.4 936.736 338.281 927.52 340.275L910.88 343.821L795.424 344.153L679.84 344.375V337.727V331.079L824.864 331.189L969.76 331.3L956.96 333.96Z"
                fill="#F3F3F3"
              />
            </g>
            <path
              d="M8 329C90.4999 356.915 215.603 381.744 350 387.339C469.678 392.322 537.57 394.675 656.999 387.339C715.265 383.761 748.137 381.707 805.5 373.731C880.284 363.332 992.5 331.5 992.5 331.5"
              stroke="#505050"
              stroke-width="2"
              stroke-linecap="round"
            />
            <path
              d="M8 329C46.0194 337.648 142.175 353.483 223.107 357.227C369.682 364.008 487.183 363.16 655.828 357.227C788.088 352.573 992.5 331.5 992.5 331.5"
              stroke="#505050"
              stroke-width="2"
              stroke-linecap="round"
            />
            <g>
              <path
                d="M6 782.565V917.026L10.224 917.649C12.4 917.961 84.336 918.065 169.84 917.961L325.36 917.649L325.744 782.773L326 648H166H6V782.565ZM95.6 739.961V829.844L55.152 869.642C32.88 891.464 13.552 910.272 12.272 911.415C9.84 913.389 9.84 910.272 9.84 782.357V651.221L26.864 650.806C36.08 650.702 55.408 650.39 69.744 650.286L95.6 650.078V739.961ZM322.16 661.716C322.288 668.159 322.288 677.407 322.288 682.291C322.288 687.174 322.288 722.089 322.288 759.912L322.16 828.805H210.8H99.44V739.442V650.078H210.8H322.16V661.716ZM322.16 873.487V915.052H167.792C44.4 915.052 13.68 914.74 14.576 913.701C15.344 913.077 31.088 897.491 49.648 879.202C68.336 860.914 86.64 842.833 90.48 838.989L97.52 831.923H209.904H322.16V873.487Z"
                fill="#C7C7C7"
              />
              <path
                d="M322.16 873.487V915.052H167.792C44.4 915.052 13.68 914.74 14.576 913.701C15.344 913.077 31.088 897.491 49.648 879.202C68.336 860.914 86.64 842.833 90.48 838.989L97.52 831.923H209.904H322.16V873.487Z"
                fill="#F3F3F3"
              />
              <path
                d="M95.6 739.961V829.844L55.152 869.642C32.88 891.464 13.552 910.272 12.272 911.415C9.84 913.389 9.84 910.272 9.84 782.357V651.221L26.864 650.806C36.08 650.702 55.408 650.39 69.744 650.286L95.6 650.078V739.961Z"
                fill="#F3F3F3"
              />
              <path
                d="M322.16 661.716C322.288 668.159 322.288 677.407 322.288 682.291V759.912L322.16 828.805H210.8H99.44V739.442V650.078H210.8H322.16V661.716Z"
                fill="#D7D7D7"
              />
            </g>
            <g>
              <path
                d="M341.264 697.015C341.132 724.015 341 784.454 341 831.288V916.442L383.227 917.065C406.32 917.481 477.973 917.792 542.501 917.896L659.548 918L659.68 882.9C659.68 863.688 659.944 802.938 660.34 747.9L661 648H501.198H341.528L341.264 697.015ZM371.878 740.008V829.627L358.682 866.285C351.425 886.431 345.223 903.358 344.959 903.981C344.563 904.5 344.299 847.592 344.299 777.496L344.167 649.973L358.023 650.181L371.878 650.285V740.008ZM625.239 739.592V828.692H500.538H375.837V739.592V650.492H500.538L625.239 650.596V739.592ZM656.777 778.535V907.096L642.658 870.231L628.67 833.365L628.142 756.519C627.878 714.254 628.142 673.027 628.538 664.823L629.462 650.077H643.186H656.909L656.777 778.535ZM627.746 838.765C630.254 845.619 644.373 884.146 650.971 902.215C652.819 907.2 654.666 912.081 655.062 913.015C655.722 914.781 647.804 914.885 500.67 914.885C397.214 914.885 345.487 914.573 345.487 913.846C345.487 913.015 369.767 844.685 373.99 833.573C374.649 831.912 381.775 831.808 499.878 831.808H625.107L627.746 838.765Z"
                fill="#C7C7C7"
              />
              <path
                d="M627.746 838.765C630.254 845.619 644.373 884.146 650.971 902.215C652.819 907.2 654.666 912.081 655.062 913.015C655.722 914.781 647.804 914.885 500.67 914.885C397.214 914.885 345.487 914.573 345.487 913.846C345.487 913.015 369.767 844.685 373.99 833.573C374.649 831.912 381.775 831.808 499.878 831.808H625.107L627.746 838.765Z"
                fill="#F3F3F3"
              />
              <path
                d="M656.777 778.535V907.096L642.658 870.231L628.67 833.365L628.142 756.519C627.878 714.254 628.142 673.027 628.538 664.823L629.462 650.077H643.186H656.909L656.777 778.535Z"
                fill="#F3F3F3"
              />
              <path
                d="M371.878 740.008V829.627L358.682 866.285C351.425 886.431 345.223 903.358 344.959 903.981C344.563 904.5 344.299 847.592 344.299 777.496L344.167 649.973L358.023 650.181L371.878 650.285V740.008Z"
                fill="#F3F3F3"
              />
              <path
                d="M625.239 739.592V828.692H500.538H375.837V739.592V650.492H500.538L625.239 650.596V739.592Z"
                fill="#D7D7D7"
              />
            </g>
            <g>
              <path
                d="M785.184 648.12L676 648.431V782.797V917.163L679.328 917.785C681.76 918.304 993.568 917.785 995.744 917.266C995.872 917.163 996 856.672 996 782.797V648.431L984.224 648.327C977.696 648.327 954.784 648.224 933.28 648.12C911.776 647.912 845.088 648.016 785.184 648.12ZM903.84 739.738V828.969H791.84H679.84V739.738V650.506H791.84H903.84V739.738ZM992.16 781.448V912.493L989.216 909.692C987.68 908.136 968.736 889.667 947.104 868.5L907.68 830.214V740.879V651.544L932.384 651.233C945.824 651.129 964.896 650.921 974.624 650.714L992.16 650.506V781.448ZM907.936 834.779C909.344 836.232 927.648 854.078 948.512 874.518C969.376 894.855 987.168 912.286 988.192 913.324C989.856 914.984 981.28 915.087 834.848 915.087H679.84V873.584V832.082H792.608H905.376L907.936 834.779Z"
                fill="#C7C7C7"
              />
              <path
                d="M907.936 834.779C909.344 836.232 927.648 854.078 948.512 874.518C969.376 894.855 987.168 912.286 988.192 913.324C989.856 914.984 981.28 915.087 834.848 915.087H679.84V873.584V832.082H792.608H905.376L907.936 834.779Z"
                fill="#F3F3F3"
              />
              <path
                d="M992.16 781.448V912.493L989.216 909.692C987.68 908.136 968.736 889.667 947.104 868.5L907.68 830.214V740.879V651.544L932.384 651.233C945.824 651.129 964.896 650.921 974.624 650.714L992.16 650.506V781.448Z"
                fill="#F3F3F3"
              />
              <path
                d="M903.84 739.738V828.969H791.84H679.84V739.738V650.506H791.84H903.84V739.738Z"
                fill="#D7D7D7"
              />
            </g>
            <path
              d="M10 651C92.5 663.619 215.604 672.904 350 675.433C469.678 677.686 537.571 678.749 657 675.433C715.266 673.816 748.137 672.887 805.501 669.282C880.285 664.582 993.001 652.089 993.001 652.089"
              stroke="#505050"
              stroke-width="2"
              stroke-linecap="round"
            />
            <path
              d="M10 651C48 664.88 143.109 676.061 223.999 682.07C370.5 692.954 498.848 693.661 656.5 682.07C774.5 673.395 888.167 658.572 993 652"
              stroke="#505050"
              stroke-width="2"
              stroke-linecap="round"
            />

            <rect id="illus-anchor" x="8" y="67" width="969" height="848" />
          </svg>
          <!-- PNG sopra allo SVG, click-through -->
          <img
            src="./assets/Illustrazioni Light.png"
            alt=""
            class="rooms-illustration illus-light"
            aria-hidden="true"
          />
          <img
            src="./assets/Illustrazioni Dark.png"
            alt=""
            class="rooms-illustration illus-dark"
            aria-hidden="true"
          />
        </div>

        <!-- Overlay stanza (centrale) -->
        <div id="room-overlay">
          <div class="room-bg">
            <svg
              width="990"
              height="841"
              viewBox="0 0 990 841"
              fill="none"
              xmlns="http://www.w3.org/2000/svg"
            >
              <mask id="path-1-inside-1_885_19380" fill="white">
                <path d="M107.783 62.3379H879.224V730.338H107.783V62.3379Z" />
              </mask>
              <path
                d="M107.783 62.3379H879.224V730.338H107.783V62.3379Z"
                fill="#E3E3E3"
              />
              <path
                d="M107.783 60.8379C107.783 61.8379 107.783 62.8379 107.783 63.8379C155.765 64.0046 203.746 64.1629 251.727 64.3129C460.893 64.9668 670.059 65.4623 879.224 65.7995L875.763 62.3379C875.404 285.005 875.224 507.671 875.224 730.338L879.224 726.338C622.077 726.338 364.93 726.577 107.783 727.056L111.065 730.338C110.74 555.653 110.304 380.967 109.758 206.282C109.608 158.301 109.45 110.319 109.283 62.3379C108.283 62.3379 107.283 62.3379 106.283 62.3379C106.117 110.319 105.958 158.301 105.808 206.282C105.262 380.967 104.826 555.653 104.501 730.338L104.507 733.626L107.783 733.62C364.93 734.099 622.077 734.338 879.224 734.338H883.224V730.338C883.224 507.671 883.045 285.005 882.686 62.3379L882.68 58.8707L879.224 58.8763C670.059 59.2135 460.893 59.709 251.727 60.3629C203.746 60.5129 155.765 60.6712 107.783 60.8379ZM107.783 63.8379V60.8379L106.278 60.8431L106.283 62.3379H109.283L107.783 63.8379Z"
                fill="#E1E1E1"
                mask="url(#path-1-inside-1_885_19380)"
              />
              <mask id="path-3-inside-2_885_19380" fill="white">
                <path
                  d="M108.78 63.3379L0 0.337891H989.5L877.726 63.3379H108.78Z"
                />
              </mask>
              <path
                d="M108.78 63.3379L0 0.337891H989.5L877.726 63.3379H108.78Z"
                fill="#F3F3F3"
              />
              <path
                d="M0.751751 -0.960135C0.250584 -0.0947846 -0.250584 0.770566 -0.751751 1.63592C28.1894 18.5898 57.1348 35.5365 86.0843 52.4759C93.3009 56.6986 100.518 60.9209 107.735 65.1427L108.211 65.421L108.78 65.4235C365.096 66.538 621.411 67.1659 877.726 67.3072L878.766 67.3077L879.675 66.7957C912.085 48.5517 944.491 30.2987 976.891 12.0367C981.749 9.29865 986.606 6.56037 991.464 3.8219L1004.74 -3.66099L989.5 -3.66142C693.208 -3.63694 396.915 -2.96217 100.623 -1.63711C67.082 -1.48711 33.541 -1.32878 0 -1.16211C0 -0.162109 0 0.837891 0 1.83789C33.541 2.00456 67.082 2.16289 100.623 2.31289C396.915 3.63795 693.208 4.31272 989.5 4.3372L987.537 -3.14612C982.679 -0.408448 977.821 2.32944 972.963 5.06751C940.563 23.3294 908.167 41.6003 875.777 59.8801L877.726 59.3686C621.411 59.5099 365.096 60.1377 108.78 61.2523L109.825 61.5331C102.572 57.3742 95.318 53.2158 88.0639 49.0578C58.964 32.3779 29.86 15.7053 0.751751 -0.960135ZM-0.751751 1.63592L0.751751 -0.960135L0 1.83789V-1.16211L-5.61154 -1.18999L-0.751751 1.63592Z"
                fill="#E1E1E1"
                mask="url(#path-3-inside-2_885_19380)"
              />
              <mask id="path-5-inside-3_885_19380" fill="white">
                <path
                  d="M108.835 724.338L0 840.338H990L878.169 724.338H108.835Z"
                />
              </mask>
              <path
                d="M108.835 724.338L0 840.338H990L878.169 724.338H108.835Z"
                fill="#F3F3F3"
              />
              <path
                d="M1.09391 841.364C0.364635 840.68 -0.364635 839.996 -1.09391 839.312C22.499 813.922 46.0979 788.538 69.7029 763.16C82.2089 749.714 94.7166 736.27 107.226 722.828L107.871 722.135L108.835 722.131C365.28 721.087 621.724 720.499 878.169 720.367L879.855 720.366L881.028 721.582C906.806 748.293 932.577 775.011 958.342 801.736C969.854 813.678 981.366 825.621 992.875 837.566L999.399 844.331L990 844.332C694.659 844.264 399.318 843.591 103.976 842.313C69.3176 842.163 34.6588 842.005 0 841.838C0 840.838 0 839.838 0 838.838C34.6588 838.671 69.3176 838.513 103.976 838.363C399.318 837.085 694.659 836.412 990 836.344L987.124 843.11C975.609 831.171 964.095 819.231 952.582 807.289C926.818 780.564 901.061 753.832 875.31 727.094L878.169 728.309C621.724 728.177 365.28 727.589 108.835 726.544L110.444 725.848C97.8256 739.187 85.2054 752.526 72.5835 765.862C48.7597 791.035 24.9299 816.203 1.09391 841.364ZM-1.09391 839.312L1.09391 841.364L0 838.838V841.838L-3.46425 841.855L-1.09391 839.312Z"
                fill="#E1E1E1"
                mask="url(#path-5-inside-3_885_19380)"
              />
              <mask id="path-7-inside-4_885_19380" fill="white">
                <path
                  d="M109.279 62.3379L0 0.337891V840.338L109.279 729.204V62.3379Z"
                />
              </mask>
              <path
                d="M109.279 62.3379L0 0.337891V840.338L109.279 729.204V62.3379Z"
                fill="#F3F3F3"
              />
              <path
                d="M0.740198 -0.966758C0.246733 -0.0969922 -0.246733 0.772773 -0.740198 1.64254C25.1019 16.4958 50.9482 31.3418 76.7985 46.1806C87.2706 52.1918 97.7433 58.2018 108.217 64.2107L107.126 62.3379C106.058 284.627 105.453 506.915 105.312 729.204L106.45 726.422C82.6719 750.573 58.9013 774.732 35.1385 798.898C22.4749 811.776 9.8136 824.657 -2.84558 837.54L3.99082 840.338C3.90604 590.144 3.2341 339.95 1.975 89.7564C1.825 59.9502 1.66667 30.144 1.5 0.337891C0.5 0.337891 -0.5 0.337891 -1.5 0.337891C-1.66667 30.144 -1.825 59.9502 -1.975 89.7564C-3.2341 339.95 -3.90604 590.144 -3.99082 840.338L-3.98871 850.089L2.84558 843.136C15.5135 830.262 28.1792 817.385 40.8427 804.507C64.6056 780.341 88.3608 756.167 112.108 731.986L113.248 730.825L113.247 729.204C113.106 506.915 112.501 284.627 111.432 62.3379L111.426 61.0736L110.342 60.4651C99.8111 54.5572 89.2797 48.6505 78.7477 42.745C52.7493 28.1672 26.7468 13.5966 0.740198 -0.966758ZM-0.740198 1.64254L0.740198 -0.966758L-1.51263 -2.22831L-1.5 0.337891H1.5L-0.740198 1.64254Z"
                fill="#E1E1E1"
                mask="url(#path-7-inside-4_885_19380)"
              />
              <mask id="path-9-inside-5_885_19380" fill="white">
                <path
                  d="M877.222 62.3379L988.996 0.337891V840.338L877.222 729.204V62.3379Z"
                />
              </mask>
              <path
                d="M877.222 62.3379L988.996 0.337891V840.338L877.222 729.204V62.3379Z"
                fill="#F3F3F3"
              />
              <path
                d="M988.268 -0.973827C988.754 -0.0993486 989.239 0.77513 989.724 1.64961C963.682 16.2851 937.637 30.9133 911.588 45.5341C900.483 51.767 889.377 57.9985 878.271 64.2288L879.384 62.3379C880.448 284.627 881.049 506.915 881.19 729.204L880.02 726.39C904.02 750.222 928.012 774.062 951.997 797.91C965.27 811.107 978.541 824.307 991.809 837.508L985.006 840.338C985.093 590.21 985.765 340.081 987.021 89.9531C987.171 60.0813 987.329 30.2096 987.496 0.337891C988.496 0.337891 989.496 0.337891 990.496 0.337891C990.663 30.2096 990.821 60.0813 990.971 89.9531C992.227 340.081 992.899 590.21 992.986 840.338L992.984 849.933L986.183 843.167C972.905 829.975 959.629 816.78 946.356 803.583C922.371 779.735 898.394 755.88 874.424 732.018L873.253 730.852L873.254 729.204C873.394 506.915 873.996 284.627 875.06 62.3379L875.066 61.0543L876.173 60.447C887.339 54.3233 898.505 48.201 909.672 42.08C935.866 27.7214 962.065 13.3701 988.268 -0.973827ZM989.724 1.64961L988.268 -0.973827L990.509 -2.20012L990.496 0.337891H987.496L989.724 1.64961Z"
                fill="#E1E1E1"
                mask="url(#path-9-inside-5_885_19380)"
              />
              <mask id="path-11-inside-6_885_19380" fill="white">
                <path d="M0 0H990V841H0V0Z" />
              </mask>
              <path
                d="M0 -1.5C0 -0.5 0 0.5 0 1.5C61.0333 1.66667 122.067 1.825 183.1 1.975C452.067 2.63603 721.033 3.13523 990 3.47258L986.527 0C986.176 280.333 986 560.667 986 841L990 837C660 837 330 837.244 0 837.731L3.26914 841C2.94535 621.7 2.51397 402.4 1.975 183.1C1.825 122.067 1.66667 61.0333 1.5 0C0.5 0 -0.5 0 -1.5 0C-1.66667 61.0333 -1.825 122.067 -1.975 183.1C-2.51397 402.4 -2.94535 621.7 -3.26914 841L-3.26431 844.274L0 844.269C330 844.756 660 845 990 845C990 845 990 845 990 845H994V841C994 560.667 993.824 280.333 993.472 0L993.468 -3.47693L990 -3.47258C721.033 -3.13523 452.067 -2.63603 183.1 -1.975C122.067 -1.825 61.0333 -1.66667 0 -1.5ZM0 1.5V-1.5L-1.50408 -1.49589L-1.5 0H1.5L0 1.5Z"
                fill="#E1E1E1"
                mask="url(#path-11-inside-6_885_19380)"
              />
              <g opacity="0.15" filter="url(#filter0_f_885_19380)">
                <path
                  d="M348.826 664.278C348.806 664.334 348.727 664.334 348.707 664.278C348.697 664.249 348.708 664.218 348.735 664.202C348.785 664.173 348.845 664.223 348.826 664.278ZM350.036 660.864C349.957 661.088 349.8 661.276 349.594 661.395L348.606 661.966C348.429 662.069 348.21 662.069 348.032 661.966C347.914 661.898 347.825 661.79 347.779 661.661L338.884 636.581C338.574 635.705 339.522 634.916 340.327 635.381L347.819 639.707C348.129 639.885 348.51 639.885 348.819 639.707L357.435 634.732C358.24 634.267 359.188 635.056 358.878 635.932L350.036 660.864ZM360.938 630.122C360.858 630.347 360.701 630.535 360.495 630.654L348.819 637.396C348.51 637.575 348.129 637.575 347.819 637.396L337.267 631.304C337.06 631.185 336.904 630.996 336.824 630.772L327.982 605.839C327.671 604.963 328.619 604.174 329.424 604.639L347.819 615.259C348.129 615.438 348.51 615.438 348.819 615.259L368.336 603.99C369.141 603.526 370.09 604.314 369.779 605.191L360.938 630.122ZM371.839 599.381C371.76 599.605 371.603 599.794 371.397 599.913L348.819 612.949C348.51 613.127 348.129 613.127 347.819 612.949L326.364 600.561C326.158 600.442 326.001 600.254 325.922 600.03L317.079 575.095C316.768 574.219 317.716 573.43 318.521 573.895L347.821 590.811C348.131 590.99 348.512 590.99 348.821 590.811L379.238 573.249C380.043 572.784 380.991 573.573 380.68 574.449L371.839 599.381ZM382.74 568.64C382.661 568.864 382.504 569.053 382.298 569.172L348.82 588.501C348.511 588.679 348.13 588.679 347.82 588.501L315.461 569.818C315.255 569.699 315.098 569.511 315.018 569.286L306.176 544.353C305.865 543.477 306.814 542.688 307.619 543.152L347.821 566.364C348.131 566.542 348.512 566.542 348.821 566.364L390.14 542.508C390.945 542.043 391.893 542.832 391.583 543.708L382.74 568.64ZM393.198 300.542C393.404 300.661 393.561 300.85 393.641 301.074L402.249 325.346C402.413 325.809 402.89 326.084 403.373 325.995L428.706 321.319C428.94 321.276 429.182 321.317 429.387 321.436L473.27 346.771C473.579 346.95 473.77 347.28 473.77 347.637V398.575C473.77 398.812 473.685 399.042 473.531 399.223L456.852 418.843C456.535 419.216 456.535 419.765 456.852 420.138L473.531 439.757C473.685 439.938 473.77 440.168 473.77 440.405V491.338C473.77 491.695 473.579 492.025 473.27 492.204L429.383 517.541C429.177 517.659 428.935 517.701 428.701 517.658L403.373 512.985C402.89 512.896 402.413 513.171 402.249 513.634L393.643 537.899C393.563 538.123 393.406 538.312 393.2 538.431L348.821 564.053C348.512 564.232 348.131 564.232 347.821 564.053L304.559 539.076C304.352 538.957 304.196 538.769 304.116 538.544L295.283 513.634C295.119 513.171 294.642 512.896 294.159 512.985L268.156 517.783C267.922 517.826 267.681 517.784 267.475 517.666L223.373 492.204C223.064 492.025 222.873 491.695 222.873 491.338V441.451C222.873 441.213 222.957 440.984 223.111 440.803L240.68 420.138C240.997 419.765 240.997 419.216 240.68 418.843L223.111 398.176C222.957 397.995 222.873 397.765 222.873 397.528V347.637C222.873 347.28 223.064 346.95 223.373 346.771L267.47 321.311C267.676 321.192 267.918 321.151 268.151 321.194L294.159 325.995C294.642 326.084 295.119 325.809 295.283 325.345L304.118 300.429C304.198 300.204 304.354 300.016 304.561 299.897L347.821 274.922C348.131 274.743 348.512 274.743 348.821 274.922L393.198 300.542ZM242.545 357.84C242.236 358.019 242.045 358.349 242.045 358.706V480.269C242.045 480.627 242.236 480.957 242.545 481.135L347.821 541.917C348.131 542.095 348.512 542.095 348.821 541.917L454.098 481.135C454.407 480.957 454.598 480.627 454.598 480.269V358.706C454.598 358.349 454.407 358.019 454.098 357.84L348.821 297.059C348.512 296.881 348.131 296.881 347.821 297.059L242.545 357.84ZM157.355 529.165C157.355 529.522 157.546 529.852 157.855 530.031L166.147 534.818C166.952 535.283 166.743 536.499 165.828 536.667L139.805 541.47C139.571 541.514 139.329 541.472 139.123 541.353L138.239 540.843C138.205 540.823 138.184 540.786 138.184 540.746C138.184 540.72 138.193 540.694 138.21 540.674L155.594 520.225C156.196 519.516 157.355 519.942 157.355 520.873V529.165ZM558.218 539.373C558.372 539.554 558.456 539.784 558.456 540.021V540.233C558.456 540.59 558.265 540.921 557.956 541.099L557.732 541.228C557.526 541.347 557.285 541.389 557.051 541.345L531.026 536.542C530.112 536.374 529.903 535.158 530.708 534.693L538.784 530.031C539.094 529.852 539.284 529.522 539.284 529.165V519.822C539.284 518.891 540.443 518.465 541.046 519.174L558.218 539.373ZM452.098 358.995C452.407 359.173 452.598 359.503 452.598 359.861V479.114C452.598 479.471 452.407 479.802 452.098 479.98L348.821 539.607C348.512 539.786 348.131 539.786 347.821 539.607L244.545 479.98C244.236 479.802 244.045 479.471 244.045 479.114V359.861C244.045 359.503 244.236 359.173 244.545 358.995L347.821 299.369C348.131 299.19 348.512 299.19 348.821 299.369L452.098 358.995ZM178.527 516.941C178.527 517.299 178.718 517.629 179.027 517.807L198.234 528.896C199.039 529.361 198.829 530.577 197.915 530.746L171.892 535.548C171.658 535.592 171.416 535.55 171.21 535.431L159.855 528.876C159.546 528.697 159.355 528.367 159.355 528.01V516.168C159.355 515.93 159.44 515.701 159.594 515.52L176.765 495.32C177.368 494.611 178.527 495.037 178.527 495.967V516.941ZM537.046 514.469C537.2 514.65 537.284 514.879 537.284 515.117V528.01C537.284 528.367 537.094 528.697 536.784 528.876L525.645 535.306C525.439 535.425 525.198 535.467 524.964 535.423L498.939 530.621C498.025 530.452 497.816 529.236 498.621 528.771L517.612 517.807C517.922 517.629 518.112 517.299 518.112 516.941V494.918C518.112 493.987 519.272 493.561 519.874 494.27L537.046 514.469ZM199.7 504.717C199.7 505.074 199.891 505.404 200.2 505.583L230.324 522.974C231.129 523.439 230.919 524.655 230.005 524.824L203.979 529.627C203.745 529.67 203.503 529.628 203.297 529.509L181.027 516.652C180.718 516.473 180.527 516.143 180.527 515.786V491.262C180.527 491.025 180.612 490.795 180.765 490.615L197.938 470.414C198.541 469.705 199.7 470.131 199.7 471.061V504.717ZM515.874 489.565C516.028 489.746 516.112 489.975 516.112 490.212V515.786C516.112 516.143 515.922 516.473 515.612 516.652L493.557 529.384C493.351 529.503 493.11 529.545 492.876 529.502L466.851 524.699C465.937 524.53 465.728 523.314 466.533 522.849L496.441 505.583C496.751 505.404 496.941 505.074 496.941 504.717V470.014C496.941 469.084 498.101 468.658 498.703 469.367L515.874 489.565ZM220.873 492.493C220.873 492.85 221.064 493.18 221.373 493.359L262.411 517.052C263.217 517.517 263.007 518.733 262.093 518.902L236.067 523.705C235.834 523.748 235.592 523.706 235.386 523.587L202.2 504.427C201.891 504.249 201.7 503.919 201.7 503.561V466.356C201.7 466.119 201.785 465.889 201.938 465.708L219.111 445.508C219.714 444.799 220.873 445.225 220.873 446.156V492.493ZM494.703 464.661C494.857 464.842 494.941 465.072 494.941 465.309V503.561C494.941 503.919 494.751 504.249 494.441 504.427L461.47 523.462C461.264 523.581 461.022 523.623 460.788 523.58L434.764 518.777C433.85 518.608 433.641 517.392 434.446 516.927L475.27 493.359C475.579 493.18 475.77 492.85 475.77 492.493V445.11C475.77 444.18 476.929 443.753 477.531 444.462L494.703 464.661ZM263.717 370.064C263.407 370.243 263.217 370.573 263.217 370.93V468.046C263.217 468.403 263.407 468.733 263.717 468.912L347.821 517.469C348.131 517.648 348.512 517.648 348.821 517.469L432.926 468.912C433.235 468.733 433.426 468.403 433.426 468.046V370.93C433.426 370.573 433.235 370.243 432.926 370.064L348.821 321.507C348.512 321.328 348.131 321.328 347.821 321.507L263.717 370.064ZM430.926 371.218C431.235 371.397 431.426 371.727 431.426 372.084V466.891C431.426 467.248 431.235 467.578 430.926 467.757L348.821 515.16C348.512 515.338 348.131 515.338 347.821 515.16L265.717 467.757C265.407 467.578 265.217 467.248 265.217 466.891V372.084C265.217 371.727 265.407 371.397 265.717 371.218L347.821 323.816C348.131 323.638 348.512 323.638 348.821 323.816L430.926 371.218ZM284.889 382.288C284.579 382.466 284.389 382.796 284.389 383.154V455.822C284.389 456.179 284.579 456.51 284.889 456.688L347.821 493.022C348.131 493.201 348.512 493.201 348.821 493.022L411.754 456.688C412.063 456.51 412.254 456.179 412.254 455.822V383.154C412.254 382.796 412.063 382.466 411.754 382.288L348.821 345.954C348.512 345.775 348.131 345.775 347.821 345.954L284.889 382.288ZM409.754 383.442C410.063 383.621 410.254 383.951 410.254 384.308V454.667C410.254 455.024 410.063 455.354 409.754 455.533L348.821 490.712C348.512 490.891 348.131 490.891 347.821 490.712L286.889 455.533C286.579 455.354 286.389 455.024 286.389 454.667V384.308C286.389 383.951 286.579 383.621 286.889 383.442L347.821 348.263C348.131 348.085 348.512 348.085 348.821 348.263L409.754 383.442ZM306.061 394.511C305.751 394.69 305.561 395.02 305.561 395.377V443.599C305.561 443.956 305.751 444.286 306.061 444.465L347.821 468.575C348.131 468.753 348.512 468.753 348.821 468.575L390.582 444.465C390.891 444.286 391.082 443.956 391.082 443.599V395.377C391.082 395.02 390.891 394.69 390.582 394.511L348.821 370.401C348.512 370.222 348.131 370.222 347.821 370.401L306.061 394.511ZM388.582 395.666C388.891 395.844 389.082 396.174 389.082 396.532V442.443C389.082 442.801 388.891 443.131 388.582 443.309L348.821 466.265C348.512 466.444 348.131 466.444 347.821 466.265L308.061 443.309C307.751 443.131 307.561 442.801 307.561 442.443V396.532C307.561 396.174 307.751 395.844 308.061 395.666L347.821 372.711C348.131 372.532 348.512 372.532 348.821 372.711L388.582 395.666ZM327.232 406.735C326.923 406.914 326.732 407.244 326.732 407.601V431.375C326.732 431.732 326.923 432.062 327.232 432.241L347.821 444.128C348.131 444.307 348.512 444.307 348.821 444.128L369.41 432.241C369.72 432.062 369.91 431.732 369.91 431.375V407.601C369.91 407.244 369.72 406.914 369.41 406.735L348.821 394.848C348.512 394.67 348.131 394.67 347.821 394.848L327.232 406.735ZM367.41 407.889C367.72 408.068 367.91 408.398 367.91 408.755V430.221C367.91 430.578 367.72 430.908 367.41 431.087L348.821 441.818C348.512 441.997 348.131 441.997 347.821 441.818L329.232 431.087C328.923 430.908 328.732 430.578 328.732 430.221V408.755C328.732 408.398 328.923 408.068 329.232 407.889L347.821 397.158C348.131 396.979 348.512 396.979 348.821 397.158L367.41 407.889ZM494.441 334.547C494.751 334.726 494.941 335.056 494.941 335.413V373.671C494.941 373.908 494.857 374.137 494.703 374.318L477.531 394.517C476.929 395.226 475.77 394.8 475.77 393.87V346.483C475.77 346.125 475.579 345.795 475.27 345.617L434.45 322.049C433.645 321.585 433.854 320.369 434.768 320.2L460.794 315.397C461.028 315.354 461.269 315.396 461.475 315.514L494.441 334.547ZM262.089 320.075C263.003 320.244 263.213 321.46 262.408 321.924L221.373 345.617C221.064 345.795 220.873 346.125 220.873 346.483V392.823C220.873 393.753 219.714 394.179 219.111 393.471L201.938 373.269C201.785 373.089 201.7 372.859 201.7 372.622V335.413C201.7 335.056 201.891 334.726 202.2 334.547L235.381 315.389C235.587 315.271 235.829 315.229 236.063 315.272L262.089 320.075ZM515.612 322.325C515.922 322.503 516.112 322.833 516.112 323.191V348.767C516.112 349.005 516.028 349.234 515.874 349.415L498.703 369.613C498.101 370.322 496.941 369.896 496.941 368.965V334.259C496.941 333.902 496.751 333.572 496.441 333.393L466.537 316.128C465.732 315.663 465.941 314.447 466.855 314.278L492.879 309.476C493.113 309.433 493.354 309.475 493.56 309.594L515.612 322.325ZM230.001 314.154C230.915 314.323 231.125 315.539 230.32 316.004L200.2 333.393C199.891 333.572 199.7 333.902 199.7 334.259V367.916C199.7 368.846 198.541 369.272 197.938 368.563L180.765 348.363C180.612 348.182 180.527 347.953 180.527 347.716V323.191C180.527 322.833 180.718 322.503 181.027 322.325L203.294 309.469C203.5 309.35 203.742 309.308 203.976 309.351L230.001 314.154ZM536.784 310.101C537.094 310.28 537.284 310.61 537.284 310.967V323.863C537.284 324.1 537.2 324.33 537.046 324.511L519.874 344.71C519.272 345.419 518.112 344.993 518.112 344.062V322.036C518.112 321.679 517.922 321.349 517.612 321.17L498.623 310.207C497.818 309.742 498.027 308.526 498.941 308.357L524.968 303.554C525.202 303.511 525.443 303.553 525.649 303.672L536.784 310.101ZM197.914 308.232C198.829 308.401 199.038 309.617 198.233 310.082L179.027 321.17C178.718 321.349 178.527 321.679 178.527 322.036V343.01C178.527 343.941 177.368 344.367 176.765 343.658L159.594 323.459C159.44 323.278 159.355 323.049 159.355 322.811V310.967C159.355 310.61 159.546 310.28 159.855 310.101L171.206 303.547C171.412 303.428 171.654 303.386 171.888 303.429L197.914 308.232ZM557.956 297.877C558.266 298.056 558.456 298.386 558.456 298.743V298.959C558.456 299.196 558.372 299.426 558.218 299.606L541.046 319.806C540.443 320.514 539.284 320.088 539.284 319.158V309.813C539.284 309.456 539.094 309.125 538.784 308.947L530.711 304.286C529.906 303.821 530.115 302.605 531.029 302.436L557.055 297.633C557.289 297.59 557.531 297.632 557.737 297.751L557.956 297.877ZM165.826 302.311C166.74 302.48 166.949 303.696 166.144 304.161L157.855 308.947C157.546 309.125 157.355 309.456 157.355 309.813V318.106C157.355 319.037 156.196 319.463 155.594 318.754L138.211 298.307C138.193 298.286 138.184 298.26 138.184 298.232C138.184 298.191 138.205 298.154 138.241 298.133L139.117 297.626C139.323 297.507 139.565 297.465 139.799 297.508L165.826 302.311ZM382.296 269.801C382.502 269.92 382.659 270.109 382.738 270.333L391.581 295.266C391.891 296.142 390.943 296.931 390.138 296.466L348.821 272.612C348.512 272.433 348.131 272.433 347.821 272.612L307.621 295.822C306.816 296.286 305.867 295.497 306.178 294.621L315.02 269.686C315.1 269.462 315.257 269.274 315.463 269.155L347.82 250.474C348.13 250.296 348.511 250.296 348.82 250.474L382.296 269.801ZM371.395 239.062C371.601 239.181 371.758 239.369 371.837 239.594L380.678 264.525C380.989 265.401 380.041 266.19 379.236 265.725L348.821 248.165C348.512 247.986 348.131 247.986 347.821 248.165L318.522 265.079C317.717 265.544 316.769 264.755 317.08 263.879L325.923 238.945C326.002 238.721 326.159 238.532 326.365 238.413L347.819 226.028C348.129 225.849 348.51 225.849 348.819 226.028L371.395 239.062ZM360.493 208.321C360.699 208.44 360.856 208.628 360.936 208.852L369.778 233.785C370.089 234.661 369.14 235.45 368.335 234.986L348.819 223.718C348.51 223.54 348.129 223.54 347.819 223.718L329.424 234.338C328.619 234.803 327.671 234.014 327.982 233.138L336.825 208.204C336.905 207.98 337.061 207.791 337.268 207.672L347.819 201.581C348.129 201.402 348.51 201.402 348.819 201.581L360.493 208.321ZM349.592 177.579C349.798 177.698 349.955 177.887 350.034 178.111L358.877 203.044C359.187 203.92 358.239 204.709 357.434 204.245L348.819 199.271C348.51 199.093 348.129 199.093 347.819 199.271L340.328 203.596C339.523 204.061 338.574 203.272 338.885 202.396L347.781 177.313C347.827 177.185 347.916 177.077 348.034 177.009C348.211 176.907 348.428 176.908 348.604 177.009L349.592 177.579ZM348.825 174.701C348.844 174.755 348.785 174.804 348.735 174.775C348.709 174.76 348.698 174.729 348.708 174.7C348.727 174.645 348.805 174.645 348.825 174.701Z"
                  fill="#959090"
                />
              </g>
              <defs>
                <filter
                  id="filter0_f_885_19380"
                  x="137.184"
                  y="173.659"
                  width="422.273"
                  height="491.661"
                  filterUnits="userSpaceOnUse"
                  color-interpolation-filters="sRGB"
                >
                  <feFlood flood-opacity="0" result="BackgroundImageFix" />
                  <feBlend
                    mode="normal"
                    in="SourceGraphic"
                    in2="BackgroundImageFix"
                    result="shape"
                  />
                  <feGaussianBlur
                    stdDeviation="0.5"
                    result="effect1_foregroundBlur_885_19380"
                  />
                </filter>
              </defs>
            </svg>

            <!-- metrics overlay (numeri + barra) -->
            <div class="room-metrics">
              <div class="room-header">
                <span id="room-count">0</span>
                <span class="divider">/</span>
                <span id="total-count">0</span>
                <span class="label">Reazioni Totali</span>
              </div>
              <div class="room-bar">
                <div id="room-bar-fill"></div>
              </div>
            </div>
            <div
              class="room-metrics room-metrics-emotion"
              style="display: none"
            >
              <div class="room-header">
                <span id="emo-count">0</span>
                <span class="divider">/</span>
                <span id="emo-room-total">0</span>
                <span class="label">Reazioni in Stanza</span>
              </div>
              <div class="room-bar">
                <div id="emo-bar-fill"></div>
              </div>
            </div>
            <section id="hourly-block" class="hourly" hidden>
              <div class="hourly-header">
                <h3>Affluenza oraria</h3>
                <div class="hourly-date-switch">
                  <button
                    type="button"
                    class="hour-btn"
                    id="hour-prev"
                    aria-label="Data precedente"
                  >
                    ◄
                  </button>
                  <span id="hour-date-label">—</span>
                  <button
                    type="button"
                    class="hour-btn"
                    id="hour-next"
                    aria-label="Data successiva"
                  >
                    ►
                  </button>
                </div>
              </div>
              <div class="hourly-chart-wrap">
                <svg
                  id="hourly-chart"
                  viewBox="0 0 320 260"
                  preserveAspectRatio="xMidYMid meet"
                  aria-label="Affluenza oraria"
                ></svg>
              </div>
            </section>
          </div>
          <div class="room-back">
            <button id="close-overlay">← Stanze</button>
          </div>
        </div>
      </main>

      <!-- Colonna 3 -->
      <!-- Colonna DESTRA: due bar chart Giorno 1 / Giorno 2 -->
      <aside class="col col-right">
        <div class="rightcol-title">Emozioni in stanza, durante il giorno</div>
        <div class="chart-grid">
          <div class="chart-block">
            <header class="chart-header">
              <strong id="day1-subtitle" class="subhead">—</strong>
            </header>

            <div class="chart-wrapper">
              <svg id="chart-day1"></svg>
            </div>
          </div>
          <div class="chart-block">
            <header class="chart-header">
              <strong id="day2-subtitle" class="subhead">—</strong>
            </header>

            <div class="chart-wrapper">
              <svg id="chart-day2"></svg>
            </div>
          </div>
        </div>
        <!-- Footer aggregato per la colonna destra -->
        <div class="rightcol-summary">
          <div class="total-reactions">
            <span id="total-reactions-all">0</span> Reazioni totali
          </div>
          <div class="common-emotion">
            <span class="label">Emozione più comune</span>
            <div class="emo-tag" id="common-emotion-tag">
              <span class="dot"></span>
              <span class="name">—</span>
            </div>
          </div>
        </div>
      </aside>
    </div>

    <div class="bottombar" role="contentinfo">
      <div class="b-left">
        Ultimo aggiornamento: <span id="last-update">–</span>
      </div>
      <div class="b-center"></div>
      <div class="b-right">
        <button
          class="lang-toggle"
          aria-pressed="false"
          aria-label="Cambia lingua"
        >
          <span class="lang-it active">ITA</span>
          <span class="divider">/</span>
          <span class="lang-en">ENG</span>
        </button>
      </div>
    </div>

    <script src="https://d3js.org/d3.v7.min.js"></script>
    <script src="./main.js"></script>
  </body>
</html>
